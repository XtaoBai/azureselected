<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploying Java EE apps to Azure: Part 2 | Azure 中文精选</title>
    <meta name="description" content="This is the second blog in a series of posts that will walk you through the options of running Java EE applications on Azure. In this part, we will run the Java EE app as a Docker container on Azure Container Instances.">
    <link rel="icon" href="/favicon.ico">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.0e2430c9.css" as="style"><link rel="preload" href="/assets/js/app.c0d74d7f.js" as="script"><link rel="preload" href="/assets/js/2.08baae6d.js" as="script"><link rel="preload" href="/assets/js/21.c43165a2.js" as="script"><link rel="preload" href="/assets/js/5.eebe458a.js" as="script"><link rel="preload" href="/assets/js/7.6adafdd9.js" as="script"><link rel="prefetch" href="/assets/js/10.12abc3d7.js"><link rel="prefetch" href="/assets/js/11.6049fb16.js"><link rel="prefetch" href="/assets/js/12.d517e78a.js"><link rel="prefetch" href="/assets/js/13.b673915e.js"><link rel="prefetch" href="/assets/js/14.0da58482.js"><link rel="prefetch" href="/assets/js/15.d3282f3c.js"><link rel="prefetch" href="/assets/js/16.b03e52b7.js"><link rel="prefetch" href="/assets/js/17.bc5d62a9.js"><link rel="prefetch" href="/assets/js/18.d11dbfdb.js"><link rel="prefetch" href="/assets/js/19.152537cb.js"><link rel="prefetch" href="/assets/js/20.4d8f2d37.js"><link rel="prefetch" href="/assets/js/22.ed56ea05.js"><link rel="prefetch" href="/assets/js/23.7061786d.js"><link rel="prefetch" href="/assets/js/24.9da786f3.js"><link rel="prefetch" href="/assets/js/25.26b392c1.js"><link rel="prefetch" href="/assets/js/26.d8cdedff.js"><link rel="prefetch" href="/assets/js/27.d40fd551.js"><link rel="prefetch" href="/assets/js/28.a5d67a92.js"><link rel="prefetch" href="/assets/js/29.dfa63691.js"><link rel="prefetch" href="/assets/js/3.01559db2.js"><link rel="prefetch" href="/assets/js/30.f1b74c75.js"><link rel="prefetch" href="/assets/js/31.ece58fb4.js"><link rel="prefetch" href="/assets/js/32.ee3030e1.js"><link rel="prefetch" href="/assets/js/4.0ba3a85d.js"><link rel="prefetch" href="/assets/js/6.36b61dfe.js"><link rel="prefetch" href="/assets/js/8.127c1a20.js"><link rel="prefetch" href="/assets/js/9.e687ebd4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0e2430c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo_azure.svg" alt="Azure 中文精选" class="logo"> <span class="site-name can-hide">Azure 中文精选</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/content/cloud-advocate/" class="nav-link router-link-active">Cloud Advocate</a></div><div class="nav-item"><a href="/content/tips-tricks/" class="nav-link">Tips &amp; Tricks</a></div><div class="nav-item"><a href="/tags.html" class="nav-link">标签</a></div><div class="nav-item"><a href="https://wj.qq.com/s2/5227985/7213/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要参加翻译
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://azureselected.com/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/azureselected/azureselected" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/content/cloud-advocate/" class="nav-link router-link-active">Cloud Advocate</a></div><div class="nav-item"><a href="/content/tips-tricks/" class="nav-link">Tips &amp; Tricks</a></div><div class="nav-item"><a href="/tags.html" class="nav-link">标签</a></div><div class="nav-item"><a href="https://wj.qq.com/s2/5227985/7213/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要参加翻译
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://azureselected.com/rss.xml" target="_blank" rel="noopener noreferrer" class="nav-link external">
  RSS
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/azureselected/azureselected" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="deploying-java-ee-apps-to-azure-part-2"><a href="#deploying-java-ee-apps-to-azure-part-2" class="header-anchor">#</a> Deploying Java EE apps to Azure: Part 2</h1> <div class="content-meta"><p class="original-info"><a href="https://medium.com/microsoftazure/deploying-java-ee-apps-to-azure-part-2-37d73d0ee401">原文由 Abhishek Gupta 在 12/6/2019 发布。</a></p> <div class="tags-head"><span><a href="/tags.html#Java EE">
      Java EE
    </a><a href="/tags.html#Azure">
      Azure
    </a><a href="/tags.html#IaaS">
      IaaS
    </a><a href="/tags.html#Cloud Computing">
      Cloud Computing
    </a><a href="/tags.html#Database">
      Database
    </a></span></div> <hr></div> <p>This is the second blog in a series of posts that will walk you through the options of running Java EE applications on Azure. <a href="https://medium.com/microsoftazure/deploying-java-ee-apps-to-azure-part-1-e895284b46d1" target="_blank" rel="noopener noreferrer">The first part<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> provided details on how to deploy a Java EE app to an application server which is set up in a <a href="https://azure.microsoft.com/services/virtual-machines/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Virtual Machine on Microsoft Azure<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> along with the <a href="https://azure.microsoft.com/services/postgresql/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Azure Database for PostgreSQL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> service as the backend database.</p> <p>In this part, we will run the Java EE app as a Docker container on <a href="https://azure.microsoft.com/services/container-instances/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Azure Container Instances<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The example used in this blog is a simple three-tier application that uses Java EE 8 specifications such as JAX-RS, EJB, CDI, JPA, JSF, Bean Validation. We will use the <a href="https://www.payara.fish/" target="_blank" rel="noopener noreferrer">Payara Server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to deploy the application and use <a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">PostgreSQL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> as the relational database.</p> <p><img src="https://miro.medium.com/max/60/1*-gOAml8lPYXSaU5clFltdQ.png?q=20" alt="img"></p> <p><img src="https://miro.medium.com/max/980/1*-gOAml8lPYXSaU5clFltdQ.png" alt="img"></p> <p>During the course of the tutorial, we will cover:</p> <ul><li>Postgres setup on Azure</li> <li>Dockerize the Java EE app and setup Azure Container Registry to store the Docker image</li> <li>Deploy the application to Azure Container Instances</li> <li>Explore its functionality</li></ul> <blockquote><p><em>Except for minor changes, the application used in this tutorial has been adapted from</em> <a href="https://github.com/m-reza-rahman/javaee-azure/tree/master/javaee" target="_blank" rel="noopener noreferrer"><em>this project</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <em>by</em> <a href="https://twitter.com/reza_rahman" target="_blank" rel="noopener noreferrer"><em>Reza Rahman</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <hr> <h1 id="pre-requisites"><a href="#pre-requisites" class="header-anchor">#</a> Pre-requisites</h1> <p>You will need a <a href="https://docs.microsoft.com/azure/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Microsoft Azure account<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and the <a href="https://docs.microsoft.com/cli/azure/?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Azure CLI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to work through the tutorial.</p> <p>If you don’t have a Microsoft Azure account, go ahead and <a href="https://azure.microsoft.com/free/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">sign up for a free one!<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The Azure CLI is a cross-platform command-line experience for managing Azure resources — please install it using <a href="https://docs.microsoft.com/cli/azure/install-azure-cli?view=azure-cli-latest&amp;WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">these instructions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h1 id="first-things-first…"><a href="#first-things-first…" class="header-anchor">#</a> First things first…</h1> <p>Set your Azure Subscription ID using the Azure CLI which will be used for this tutorial.</p> <p>To set your Azure subscription ID</p> <div class="language- extra-class"><pre class="language-text"><code>export AZURE_SUBSCRIPTION_ID=[to be filled]
az account set --subscription $AZURE_SUBSCRIPTION_ID
</code></pre></div><p>Create a resource group that will contain all the services (resources) which you will create as a part of this tutorial. A resource group is like a logical container that holds related resources for an Azure solution. The resource group includes those resources that you want to manage as a group.</p> <p>To create a resource group</p> <div class="language- extra-class"><pre class="language-text"><code>export AZURE_RESOURCE_GROUP_NAME=[to be filled]
export AZURE_LOCATION=[to be filled]
az group create --name $AZURE_RESOURCE_GROUP_NAME --location $AZURE_LOCATION
</code></pre></div><hr> <h1 id="install-postgres-on-azure"><a href="#install-postgres-on-azure" class="header-anchor">#</a> Install Postgres on Azure</h1> <p><a href="https://docs.microsoft.com/azure/postgresql/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Azure Database for PostgreSQL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is a relational database service based on the open-source <a href="https://www.postgresql.org/" target="_blank" rel="noopener noreferrer">Postgres database engine<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It’s a fully managed database-as-a-service offering which is available in two deployment options, as <a href="https://docs.microsoft.com/azure/postgresql/concepts-servers?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">a single server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and as <a href="https://docs.microsoft.com/azure/postgresql/concepts-hyperscale-nodes?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">a Hyperscale (Citus) cluster<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <blockquote><p><em>We will be using the single server option for the purposes of this tutorial</em></p></blockquote> <p>We will use the <code>az postgres server create</code>command to create a Postgres server instance on Azure. First, set up some of the server properties such as the name, admin user, etc.</p> <div class="language- extra-class"><pre class="language-text"><code>export AZURE_POSTGRES_SERVER_NAME=[to be filled]
export AZURE_POSTGRES_ADMIN_USER=[to be filled]
export AZURE_POSTGRES_ADMIN_PASSWORD=[to be filled]
export SKU=B_Gen5_1
export STORAGE=5120
</code></pre></div><blockquote><p><em>For storage and SKU options, please refer to</em> <a href="https://docs.microsoft.com/azure/postgresql/concepts-pricing-tiers?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer"><em>the documentation</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>And, then invoke the command to initiate the database instance creation:</p> <div class="language- extra-class"><pre class="language-text"><code>az postgres server create --resource-group $AZURE_RESOURCE_GROUP_NAME --name $AZURE_POSTGRES_SERVER_NAME  --location $AZURE_LOCATION --admin-user $AZURE_POSTGRES_ADMIN_USER --admin-password $AZURE_POSTGRES_ADMIN_PASSWORD --storage-size $STORAGE --sku-name $SKU
</code></pre></div><p>The provisioning will take a few minutes.</p> <p>To check the details of the Postgres database instance you just provisioned, invoke <code>az postgres server show</code> command:</p> <div class="language- extra-class"><pre class="language-text"><code>az postgres server show --resource-group $AZURE_RESOURCE_GROUP_NAME --name $AZURE_POSTGRES_SERVER_NAME
</code></pre></div><p>You should get a JSON response. Please note down the value for the <code>fullyQualifiedDomainName</code> attribute as you will be using this to connect to the Postgres instance later.</p> <blockquote><p><em>It should be of the format:</em> <code>*[AZURE_POSTGRES_DB_NAME].postgres.database.azure.com*</code></p></blockquote> <h2 id="allow-azure-container-instances-to-access-the-postgres-database"><a href="#allow-azure-container-instances-to-access-the-postgres-database" class="header-anchor">#</a> Allow Azure Container Instances to access the Postgres database</h2> <p>Later in the post, we will see how to deploy the application to <a href="https://docs.microsoft.com/azure/container-instances/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Azure Container Instances<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. But, the Postgres database is not accessible to external services by default. We will use the <code>az postgres server firewall-rule create</code> command to create a firewall rule to explicitly allow Azure services to access the Postgres instance — this will allow the JavaEE application deployed within Azure Container Instances to communicate with Postgres.</p> <div class="language- extra-class"><pre class="language-text"><code>export FIREWALL_RULE_NAME=AllowJavaEECafeAppOnACIaz postgres server firewall-rule create --resource-group $AZURE_RESOURCE_GROUP_NAME --server-name $AZURE_POSTGRES_SERVER_NAME --start-ip-address=0.0.0.0 --end-ip-address=0.0.0.0 --name $FIREWALL_RULE_NAME
</code></pre></div><blockquote><p><em>This setting allows network connections from all IPs within the Azure network. For production use, try to configure the most restrictive firewall rules possible</em></p></blockquote> <hr> <h1 id="setup-azure-container-registry"><a href="#setup-azure-container-registry" class="header-anchor">#</a> Setup Azure Container Registry</h1> <p>Azure Container Registry is a managed, private Docker registry service to store and manage your private Docker container images (it based on the open-source Docker Registry 2.0). You can use Azure container registries with your existing container development and deployment pipelines or use <a href="https://docs.microsoft.com/azure/container-registry/container-registry-tasks-overview?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Azure Container Registry Tasks<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to build container images in Azure. You can either build on-demand, or fully automate builds with triggers such as source code commits and base image updates.</p> <p>Let’s create a registry to store the Docker image for the JavaEE application. We will use the <code>az acr create</code>command</p> <div class="language- extra-class"><pre class="language-text"><code>export ACR_NAME=javaeecafe-acraz acr create --resource-group $AZURE_RESOURCE_GROUP_NAME --name $ACR_NAME --sku Basic --admin-enabled true
</code></pre></div><blockquote><p><em>We are using the</em> <code>*Basic*</code> <em>SKU. Valid value are:</em> <code>*Basic*</code><em>,</em> <code>*Classic*</code><em>,</em> <code>*Premium*</code><em>,</em> <code>*Standard*</code></p></blockquote> <p>You can login to the registry once it’s created and check the login server</p> <div class="language- extra-class"><pre class="language-text"><code>az acr login --name $ACR_NAME
az acr show --name $ACR_NAME --query loginServer --output table
</code></pre></div><blockquote><p><em>You will use the ACR login server name soon. It’s value follows the format:</em> <code>*[ACR_NAME].azurecr.io*</code></p></blockquote> <hr> <h1 id="setup-and-prepare-application-image"><a href="#setup-and-prepare-application-image" class="header-anchor">#</a> Setup and prepare application image</h1> <p>Clone the git repository</p> <div class="language- extra-class"><pre class="language-text"><code>git clone https://github.com/abhirockzz/javaee-on-azure-caas
cd javaee-on-azure-caas
</code></pre></div><p>You need to enter the Postgres connectivity information to the ``attribute of the <code>section in</code>web.xml`.</p> <blockquote><p><em>You can find the</em> <code>*web.xml*</code> <em>file under</em> <code>*javaee-on-azure-iaas/src/main/webapp/WEB-INF*</code></p></blockquote> <p>The format is as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>jdbc:postgresql://[POSTGRES_FQDN]:5432/postgres?user=[AZURE_POSTGRES_ADMIN_USER]@[AZURE_POSTGRES_SERVER_NAME]&amp;amp;password=[AZURE_POSTGRES_ADMIN_PASSWORD]&amp;amp;sslmode=require
</code></pre></div><p>Here are the list placeholders which form a part of the JDBC URL:</p> <ul><li><code>POSTGRES_FQDN</code> with value of <code>fullyQualifiedDomainName</code></li> <li><code>AZURE_POSTGRES_ADMIN_USER</code> with the admin user name used to provision PG</li> <li><code>AZURE_POSTGRES_SERVER_NAME</code> with server name used to provision PG</li> <li><code>AZURE_POSTGRES_ADMIN_PASSWORD</code> with admin password used to provision PG</li></ul> <p>Set the required values</p> <div class="language- extra-class"><pre class="language-text"><code>export POSTGRES_FQDN=
export AZURE_POSTGRES_ADMIN_USER=
export AZURE_POSTGRES_SERVER_NAME=
export AZURE_POSTGRES_ADMIN_PASSWORD=
</code></pre></div><p>Simply use these commands to replace the contents of <code>web.xml</code></p> <div class="language- extra-class"><pre class="language-text"><code>export FILE_NAME=javaee-on-azure-iaas/src/main/webapp/WEB-INF/web.xmlsed -i 's/POSTGRES_FQDN/'&quot;$POSTGRES_FQDN&quot;'/g' $FILE_NAME
sed -i 's/AZURE_POSTGRES_SERVER_NAME/'&quot;$AZURE_POSTGRES_SERVER_NAME&quot;'/g' $FILE_NAME
sed -i 's/AZURE_POSTGRES_ADMIN_USER/'&quot;$AZURE_POSTGRES_ADMIN_USER&quot;'/g' $FILE_NAME
sed -i 's/AZURE_POSTGRES_ADMIN_PASSWORD/'&quot;$AZURE_POSTGRES_ADMIN_PASSWORD&quot;'/g' $FILE_NAME
</code></pre></div><p>Here is an example of what the `` section will look like:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;data-source&gt;
        &lt;name&gt;java:global/JavaEECafeDB&lt;/name&gt;
        &lt;class-name&gt;org.postgresql.ds.PGPoolingDataSource&lt;/class-name&gt;
        &lt;url&gt;jdbc:postgresql://foobar-pg.postgres.database.azure.com:5432/postgres?user=foobar@foobar-pg&amp;amp;password=foobarbaz&amp;amp;sslmode=require&lt;/url&gt;
&lt;/data-source&gt;
</code></pre></div><p>The application is now configured. Let’s build it!</p> <div class="language- extra-class"><pre class="language-text"><code>mvn clean install
</code></pre></div><p>You should have the WAR file available. To confirm</p> <div class="language- extra-class"><pre class="language-text"><code>ls -lrt target | grep javaee-cafe.war
</code></pre></div><h2 id="build-and-push-the-image-to-azure-container-registry"><a href="#build-and-push-the-image-to-azure-container-registry" class="header-anchor">#</a> Build and push the image to Azure Container Registry</h2> <p>Our application artifact (<code>WAR</code> file) is ready. We can now build the Docker image and push it out to Azure Container Registry. Here is a quick look at the <code>Dockerfile</code> used for creating the image</p> <div class="language- extra-class"><pre class="language-text"><code>FROM payara/server-full
COPY target/javaee-cafe.war $DEPLOY_DIR
RUN wget https://jdbc.postgresql.org/download/postgresql-42.2.8.jar
RUN cp /opt/payara/postgresql-42.2.8.jar ${PAYARA_DIR}/glassfish/domains/${DOMAIN_NAME}/lib &amp;&amp; rm /opt/payara/postgresql-42.2.8.jar
EXPOSE 8080
</code></pre></div><p>It builds on top of the base image for <code>payara/server-full</code>, copies the <code>WAR</code>file to a folder from where it can be automatically detected and deployed, downloads the Postgres JDBC driver and places it in the appropriate location for the Payara application server. That's it!</p> <div class="language- extra-class"><pre class="language-text"><code>export DOCKER_IMAGE=javaee-cafe
docker build -t $DOCKER_IMAGE .
docker tag $DOCKER_IMAGE $ACR_NAME.azurecr.io/$DOCKER_IMAGE
</code></pre></div><p>To push the image:</p> <div class="language- extra-class"><pre class="language-text"><code>docker push $ACR_NAME.azurecr.io/$DOCKER_IMAGE
</code></pre></div><p>Use <code>az acr repository list</code> command to confirm:</p> <div class="language- extra-class"><pre class="language-text"><code>az acr repository list --name $ACR_NAME --output table
</code></pre></div><hr> <h1 id="deploy-the-application-to-azure-container-instances"><a href="#deploy-the-application-to-azure-container-instances" class="header-anchor">#</a> Deploy the application to Azure Container Instances</h1> <p>Azure Container Instances allows you to run a container in Azure, without having to manage any VMs and or adopt a higher-level service. It is a solution for any scenario that can operate in isolated containers, including simple applications, task automation, and build jobs. For scenarios where you need full container orchestration, including service discovery across multiple containers, automatic scaling, and coordinated application upgrades, please take a look at <a href="https://azure.microsoft.com/services/kubernetes-service/?WT.mc_id=medium-blog-abhishgu" target="_blank" rel="noopener noreferrer">Azure Kubernetes Service (AKS)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>We are now ready to deploy the JavaEE application to Azure Container Instances. When you create a container instance, you can specify a custom DNS name label so your application is reachable at <a href="http://customlabel.azureregion.azurecontainer.io/" target="_blank" rel="noopener noreferrer"><em>customlabel.azureregion.azurecontainer.io</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <div class="language- extra-class"><pre class="language-text"><code>export ACI_CONTAINER_NAME=javaee-cafe
export DNS_NAME_LABEL=javaee-cafe
</code></pre></div><p>We will need the password for Azure Container Registry to run our Docker image in Azure Container Instance.</p> <div class="language- extra-class"><pre class="language-text"><code>az acr credential show --name $ACR_NAME
</code></pre></div><p>Enter below command to create the container and enter the password (obtained above) when prompted:</p> <div class="language- extra-class"><pre class="language-text"><code>az container create --resource-group $AZURE_RESOURCE_GROUP_NAME --name $ACI_CONTAINER_NAME --image $ACR_NAME.azurecr.io/$DOCKER_IMAGE --dns-name-label $DNS_NAME_LABEL --registry-username $ACR_NAME --ports 8080
</code></pre></div><blockquote><p><code>*--ports 8080*</code> <em>ensures that we can access the application from port</em> <code>*8080*</code><em>. This is because Payara application server serves HTTP traffic on port</em> <code>*8080*</code><em>by default.</em></p></blockquote> <p>The deployment will take a while. In the meanwhile, you can track the logs using:</p> <div class="language- extra-class"><pre class="language-text"><code>az container attach -g $AZURE_RESOURCE_GROUP_NAME -n $ACI_CONTAINER_NAME
</code></pre></div><p>You should see log messages indicating successful deployment of the <code>javaee-cafe</code> application</p> <div class="language- extra-class"><pre class="language-text"><code>[yyyy-mm-ddT13:34:21.317+0000] [Payara 5.193] [INFO] [NCLS-DEPLOYMENT-02035] [javax.enterprise.system.tools.deployment.autodeploy] [tid: _ThreadID=104 _ThreadName=payara-executor-service-scheduled-task] [timeMillis: 1574084061317] [levelValue: 800] [[
    [AutoDeploy] Successfully autodeployed : /home/abhishgu/payara5/glassfish/domains/domain1/autodeploy/javaee-cafe.war.]]
</code></pre></div><hr> <h1 id="explore-the-application"><a href="#explore-the-application" class="header-anchor">#</a> Explore the application</h1> <h2 id="access-the-jsf-front-end"><a href="#access-the-jsf-front-end" class="header-anchor">#</a> Access the JSF front end</h2> <p>Use your browser to access <code>http://[APP_FQDN]:8080/javaee-cafe</code>. You can use the UI to create, delete and see coffees.</p> <p>The <code>APP_FQDN</code> is nothing but the combination of the DNS label and the Azure region e.g. <code>http://javaee-cafe.southeastasia.azurecontainer.io:8080/javaee-cafe</code></p> <p><img src="https://miro.medium.com/max/60/1*rbEWA7qQYoqUKAtCfqLdZQ.png?q=20" alt="img"></p> <p><img src="https://miro.medium.com/max/5944/1*rbEWA7qQYoqUKAtCfqLdZQ.png" alt="img"></p> <p>Java EE cafe</p> <h2 id="use-the-rest-api"><a href="#use-the-rest-api" class="header-anchor">#</a> Use the REST API</h2> <p>The application also exposes a REST API for creating, deleting and listing coffees.</p> <div class="language- extra-class"><pre class="language-text"><code>export JAVAEE_ACI_REST=http://javaee-cafe.southeastasia.azurecontainer.io:8080/javaee-cafe/rest/coffees
</code></pre></div><p>Create coffees</p> <div class="language- extra-class"><pre class="language-text"><code>curl -X POST $JAVAEE_ACI_REST:8080/javaee-cafe/rest/coffees -d '{&quot;name&quot;:&quot;cappuccino&quot;,&quot;price&quot;:&quot;10&quot;}' -H &quot;Content-Type: application/json&quot;curl -X POST $JAVAEE_ACI_REST:8080/javaee-cafe/rest/coffees -d '{&quot;name&quot;:&quot;caffe-latte&quot;,&quot;price&quot;:&quot;15&quot;}' -H &quot;Content-Type: application/json&quot;
</code></pre></div><p>Get all coffees</p> <div class="language- extra-class"><pre class="language-text"><code>curl -H &quot;Accept: application/json&quot; $JAVAEE_ACI_REST:8080/javaee-cafe/rest/coffees
</code></pre></div><p>You should see a JSON response listing both the coffee options you just added</p> <p>Get a coffee by ID</p> <div class="language- extra-class"><pre class="language-text"><code>curl -H &quot;Accept: application/json&quot; $JAVAEE_ACI_REST:8080/javaee-cafe/rest/coffees/1
</code></pre></div><p>Delete a coffee by ID</p> <div class="language- extra-class"><pre class="language-text"><code>curl -X DELETE $JAVAEE_ACI_REST:8080/javaee-cafe/rest/coffees/1curl -H &quot;Accept: application/json&quot; $JAVAEE_ACI_REST:8080/javaee-cafe/rest/coffees
</code></pre></div><p>Notice that <code>cappuccino</code> is now deleted</p> <h2 id="clean-up-resources"><a href="#clean-up-resources" class="header-anchor">#</a> Clean up resources</h2> <p>Once you have finished exploring the application, you can delete the resources. Since we used a resource group, it's easy executing a single command.</p> <blockquote><p><em>Please be aware that this will delete all the resources in the group which includes the ones you created as part of the tutorial (Azure Container Registry, Postgres etc.) as well as any other service instances you might have if you used an</em> already existing <em>resource group</em></p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>az group delete --name $AZURE_RESOURCE_GROUP_NAME
</code></pre></div><hr> <h1 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h1> <p>You learned how to leverage Docker containers to package and deploy the application to Azure Container Instances along with a managed database offering for long term persistence.</p> <p>The third installment will cover <a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">Kubernetes<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> as a deployment platform for our Java EE application. Stay tuned!</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/azureselected/azureselected/edit/master/content/cloud-advocate/2020-01/deploying-java-ee-apps-to-azure-part-2.md" target="_blank" rel="noopener noreferrer">在 GitHub 编辑本页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近更新于:</span> <span class="time">1/7/2020, 9:12:22 AM</span></div></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.c0d74d7f.js" defer></script><script src="/assets/js/2.08baae6d.js" defer></script><script src="/assets/js/21.c43165a2.js" defer></script><script src="/assets/js/5.eebe458a.js" defer></script><script src="/assets/js/7.6adafdd9.js" defer></script>
  </body>
</html>
